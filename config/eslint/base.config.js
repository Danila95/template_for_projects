// ============================================================================
// БАЗОВАЯ КОНФИГУРАЦИЯ ESLINT
// ============================================================================
// Базовые правила JavaScript/TypeScript без специфики фреймворков
// ============================================================================

import js from '@eslint/js'
import { getAllGlobals } from './globals.config.js'

/**
 * Получить базовую конфигурацию ESLint
 * Включает рекомендуемые правила JavaScript
 * @returns {import('./types.js').ESLintConfigItem}
 */
export function getBaseConfig() {
	return {
		// Применяется ко всем TypeScript файлам
		files: ['**/*.{ts,tsx}'],

		// Рекомендуемые правила JavaScript
		...js.configs.recommended,

		// Настройки языка
		languageOptions: {
			// ECMAScript версия
			ecmaVersion: 2020,

			// Глобальные переменные
			globals: getAllGlobals(),

			// Parser опции
			parserOptions: {
				ecmaVersion: 2020,
				sourceType: 'module',
				ecmaFeatures: {
					jsx: true,
				},
			},
		},

		// Дополнительные правила (из старого проекта)
		rules: {
			// ====================================================================
			// КОНСОЛЬ И ОТЛАДКА
			// ====================================================================

			// Консоль - предупреждать, разрешать только error
			'no-console': ['warn', { allow: ['error'] }],

			// Отладка
			'no-debugger': 'warn',

			// ====================================================================
			// ПЕРЕМЕННЫЕ
			// ====================================================================

			// Неиспользуемые переменные
			'no-unused-vars': 'off', // Отключаем базовое правило, используем @typescript-eslint

			// Неопределённые переменные
			'no-undef': 'off', // TypeScript проверяет это

			// Подчёркивание в начале имени
			'no-underscore-dangle': 'off',

			// Reassign параметров функции
			'no-param-reassign': 'off',

			// Shadow переменных
			'no-shadow': 'off', // Используем TypeScript версию

			// ====================================================================
			// ФУНКЦИИ И CONTROL FLOW
			// ====================================================================

			// Пустые функции
			'no-empty-function': 'off',

			// Имена функций
			'func-names': 'off',

			// Consistent return
			'consistent-return': 'off',

			// Инкремент/декремент
			'no-plusplus': 'off',

			// ====================================================================
			// СТИЛЬ КОДА
			// ====================================================================

			// Отступы (Prettier обрабатывает)
			indent: 'off',

			// Кавычки (Prettier обрабатывает)
			quotes: ['error', 'single'],

			// Точка с запятой (Prettier обрабатывает)
			semi: ['error', 'never'],

			// Максимальная длина строки
			'max-len': [
				'warn',
				{
					ignoreComments: true,
					code: 132,
				},
			],

			// Деструктуризация
			'prefer-destructuring': 'off',
		},
	}
}
